(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(38)},3:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n(2),c=n(0),r=n.n(c),u=n(15),i=n.n(u),l=(n(3),n(4)),s=n.n(l),f="/api/persons",m=function(){return s.a.get(f).then((function(e){return console.log(e),e.data})).catch((function(e){console.log("Could not fetch data from back end")}))},d=function(e,t){return s.a.put(f+"/".concat(e),t).then((function(e){return e.data}))},h=function(e){return s.a.post(f,e).then((function(e){return e.data}))},p=function(e){return s.a.delete(f+"/".concat(e)).then((function(e){return e.data}))},v=function(e){var t=e.filterStr,n=e.filterHandler;return r.a.createElement("div",{className:"ownSection"},r.a.createElement("p",null,"Filter Shown With:"),r.a.createElement("input",{value:t,onChange:n}))},w=function(e){var t=e.inputSubmitHandler,n=e.inputChangedHandler,a=e.newName,o=e.setNewName,c=e.newPhone,u=e.setNewPhone;return r.a.createElement("form",{onSubmit:t,className:"ownSection"},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:a,onChange:n(o)}),r.a.createElement("br",null),"Phone: ",r.a.createElement("input",{value:c,onChange:n(u)})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},g=function(e){var t=e.persons,n=e.filterStr,a=e.deleteHandler,o=e.setPersons;n&&(t=t.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())})));var c=null;return t.length&&(c=t.map((function(e,t){return r.a.createElement("div",{key:t,className:"contactDiv"},r.a.createElement("p",null,e.name," ",e.phone),r.a.createElement("button",{onClick:a(e.id,o)},"Delete"))}))),r.a.createElement("div",{className:"ownSection"},c)},E=function(e){var t=e.message,n="negativeNotification";return"positive"===e.result&&(n="positiveNotification"),r.a.createElement("p",{className:n},t)};function b(e){for(var t=0,n=e.map((function(e){return e.id}));n.includes(t);)t++;return t}var N=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],u=t[1],i=Object(c.useState)(""),l=Object(o.a)(i,2),s=l[0],f=l[1],N=Object(c.useState)(""),S=Object(o.a)(N,2),j=S[0],O=S[1],y=Object(c.useState)(""),C=Object(o.a)(y,2),D=C[0],H=C[1],k=Object(c.useState)({show:!1}),P=Object(o.a)(k,2),x=P[0],T=P[1];Object(c.useEffect)((function(){m().then((function(e){console.log(e),u(e)}))}),[]);var I=null;return x.show&&(I=r.a.createElement(E,{message:x.message,result:x.result})),r.a.createElement("div",null,r.a.createElement("h2",null,"Changed"),r.a.createElement(v,{filterStr:D,filterHandler:function(e){e.preventDefault(),H(e.target.value)}}),r.a.createElement("h2",null,"Add a new contact"),r.a.createElement(w,{inputSubmitHandler:function(e){e.preventDefault(),m().then((function(e){var t=e.findIndex((function(e){return e.name===s}));if(-1!==t){if(window.confirm("Contact ".concat(e[t].name," already exists. Do you want to update?"))){var n={name:e[t].name,phone:j,id:b(e)};d(e[t].id,n).then((function(n){var o=Object(a.a)(e);o[t]=n,u(o),f(""),O("")})),T({show:!0,message:"Successfully updated.",result:"positive"}),setTimeout((function(){T({show:!1})}),2e3)}else m().then((function(e){f(""),O(""),u(e)})).catch((function(e){console.log("Data fetching failed.")}))}else{var o={name:s,phone:j,id:b(e)};h(o).then((function(t){u(e.concat(t)),f(""),O(""),T({show:!0,message:"Entry successfully created.",result:"positive"}),setTimeout((function(){T({show:!1})}),2e3)}))}})).catch((function(e){console.log("Data fetching failed")}))},inputChangedHandler:function(e){return function(t){e(t.target.value)}},newName:s,setNewName:f,newPhone:j,setNewPhone:O}),I,r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{persons:n,filterStr:D,deleteHandler:function(e,t){return function(){var o=n.findIndex((function(t){return t.id===e}));-1!==o?window.confirm("Delete ".concat(n[o].name,"?"))&&p(e).then((function(){var e=Object(a.a)(n);e.splice(o,1),t(e),T({show:!0,message:"Entry successfully deleted.",result:"negative"}),setTimeout((function(){T({show:!1})}),2e3)})).catch((function(e){T({show:!0,message:"Entry had already been deleted.",result:"negative"}),setTimeout((function(){T({show:!1})}),2e3),m().then((function(e){t(e),f(""),O("")})).catch((function(e){console.log("Data fetching failed")}))})):alert("Name not found....")}},setPersons:u}))};t.default=N;i.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.4823dce4.chunk.js.map