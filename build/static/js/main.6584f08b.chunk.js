(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(38)},3:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n(2),r=n(0),c=n.n(r),u=n(15),i=n.n(u),l=(n(3),n(4)),s=n.n(l),f="/api/persons",m=function(){return s.a.get(f).then((function(e){return e.data}))},d=function(e,t){return s.a.put(f+"/".concat(e),t).then((function(e){return e.data}))},h=function(e){return s.a.post(f,e).then((function(e){return e.data}))},p=function(e){return s.a.delete(f+"/".concat(e)).then((function(e){return e.data}))},v=function(e){var t=e.filterStr,n=e.filterHandler;return c.a.createElement("div",{className:"ownSection"},c.a.createElement("p",null,"Filter Shown With:"),c.a.createElement("input",{value:t,onChange:n}))},w=function(e){var t=e.inputSubmitHandler,n=e.inputChangedHandler,a=e.newName,o=e.setNewName,r=e.newPhone,u=e.setNewPhone;return c.a.createElement("form",{onSubmit:t,className:"ownSection"},c.a.createElement("div",null,"Name: ",c.a.createElement("input",{value:a,onChange:n(o)}),c.a.createElement("br",null),"Phone: ",c.a.createElement("input",{value:r,onChange:n(u)})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},E=function(e){var t=e.persons,n=e.filterStr,a=e.deleteHandler,o=e.setPersons;n&&(t=t.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())})));var r=null;return t.length&&(r=t.map((function(e,t){return c.a.createElement("div",{key:t,className:"contactDiv"},c.a.createElement("p",null,e.name," ",e.phone),c.a.createElement("button",{onClick:a(e.id,o)},"Delete"))}))),c.a.createElement("div",{className:"ownSection"},r)},b=function(e){var t=e.message,n="negativeNotification";return"positive"===e.result&&(n="positiveNotification"),c.a.createElement("p",{className:n},t)};function g(e){for(var t=0,n=e.map((function(e){return e.id}));n.includes(t);)t++;return t}var N=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],u=t[1],i=Object(r.useState)(""),l=Object(o.a)(i,2),s=l[0],f=l[1],N=Object(r.useState)(""),S=Object(o.a)(N,2),j=S[0],O=S[1],y=Object(r.useState)(""),C=Object(o.a)(y,2),D=C[0],H=C[1],P=Object(r.useState)({show:!1}),k=Object(o.a)(P,2),x=k[0],T=k[1];Object(r.useEffect)((function(){m().then((function(e){u(e)}))}),[]);var I=null;return x.show&&(I=c.a.createElement(b,{message:x.message,result:x.result})),c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(v,{filterStr:D,filterHandler:function(e){e.preventDefault(),H(e.target.value)}}),c.a.createElement("h2",null,"Add a new contact"),c.a.createElement(w,{inputSubmitHandler:function(e){e.preventDefault(),m().then((function(e){var t=e.findIndex((function(e){return e.name===s}));if(-1!==t){if(window.confirm("Contact ".concat(e[t].name," already exists. Do you want to update?"))){var n={name:e[t].name,phone:j,id:g(e)};d(e[t].id,n).then((function(n){var o=Object(a.a)(e);o[t]=n,u(o),f(""),O("")})),T({show:!0,message:"Successfully updated.",result:"positive"}),setTimeout((function(){T({show:!1})}),2e3)}else m().then((function(e){f(""),O(""),u(e)})).catch((function(e){console.log("Data fetching failed.")}))}else{var o={name:s,phone:j,id:g(e)};h(o).then((function(t){u(e.concat(t)),f(""),O(""),T({show:!0,message:"Entry successfully created.",result:"positive"}),setTimeout((function(){T({show:!1})}),2e3)}))}})).catch((function(e){console.log("Data fetching failed")}))},inputChangedHandler:function(e){return function(t){e(t.target.value)}},newName:s,setNewName:f,newPhone:j,setNewPhone:O}),I,c.a.createElement("h2",null,"Numbers"),c.a.createElement(E,{persons:n,filterStr:D,deleteHandler:function(e,t){return function(){var o=n.findIndex((function(t){return t.id===e}));-1!==o?window.confirm("Delete ".concat(n[o].name,"?"))&&p(e).then((function(){var e=Object(a.a)(n);e.splice(o,1),t(e),T({show:!0,message:"Entry successfully deleted.",result:"negative"}),setTimeout((function(){T({show:!1})}),2e3)})).catch((function(e){T({show:!0,message:"Entry had already been deleted.",result:"negative"}),setTimeout((function(){T({show:!1})}),2e3),m().then((function(e){t(e),f(""),O("")})).catch((function(e){console.log("Data fetching failed")}))})):alert("Name not found....")}},setPersons:u}))};t.default=N;i.a.render(c.a.createElement(N,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.6584f08b.chunk.js.map